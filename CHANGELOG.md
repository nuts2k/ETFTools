# Changelog

## [0.4.2] - 2026-02-11

### 修复

- 修复 mock patch 目标错误导致 metrics 缓存测试失败
- 修复数据采集可靠性问题


## [0.4.1] - 2026-02-11

### 修复

- 修复 TypeScript 类型错误导致的构建失败


## [0.4.0] - 2026-02-11

### 新增

- ETF 对比功能（归一化走势+相关性+对齐指标+温度）
- 搜索页标签筛选功能（阶段2）
- 详情页展示 ETF 分类标签
- 扩展 ETF 分类器关键词库和新增分类类型
- 集成 ETF 分类标签到数据流和前端展示
- 实现 ETF 自动分类器阶段0

### 修复

- 统一自选列表搜索结果容器水平内边距为 px-4
- 搜索页标签筛选 UI 优化与代码审查修复
- 修复 code review 发现的问题并补充单元测试

### 变更

- test(classifier): 补充详情页 ETF 分类标签前端测试


## [0.3.0] - 2026-02-09

### 新增

- 实现 ETF 资金流向分析功能并修复所有问题


## [0.2.10] - 2026-02-09

### 修复

- 移除未定义的 setLastUpdated 调用


## [0.2.9] - 2026-02-09

### 修复

- 标准化时区处理，统一使用中国时区


## [0.2.8] - 2026-02-08

### 新增

- 实现每日市场摘要推送功能

### 修复

- 修复 ResponsiveContainer 尺寸计算警告
- 修复 iOS Safari 搜索模式下 sticky/fixed 定位失效问题


## [0.2.7] - 2026-02-07

### 修复

- 修复页面滚动失效和 vibrate 警告问题


## [0.2.6] - 2026-02-07

### 修复

- 修复长列表下拉刷新失效问题


## [0.2.5] - 2026-02-06

### 修复

- 修复下拉刷新阻力曲线在大距离下拉时反转，导致"释放刷新"退回"下拉刷新"
- 修复快速下拉无法触发刷新的问题（抛物线公式替换为单调递增指数衰减曲线）
- 修复 iOS Safari 亚像素 scrollTop 偏移导致下拉刷新需要等待才能激活
- 新增 touchmove 延迟激活机制，滚动惯性未停止时也能顺畅触发下拉刷新

## [0.2.4] - 2026-02-06

### 新增

- 管理员前端界面：控制台首页（统计概览 + 导航入口）
- 用户管理页：用户列表、Tab 筛选（全部/管理员/已禁用）、权限/状态切换
- 系统配置页：注册开关 Toggle、自选上限 Select
- ActionSheet 通用组件：移动端底部操作面板
- Toast 通用组件：轻量通知（成功/错误，2.5s 自动消失）
- 管理员 API 函数：6 个前端 API 封装（用户管理 + 系统配置）
- 单元测试：7 个测试文件，63 个测试用例覆盖管理员前端全部关键逻辑

### 修复

- 修复管理控制台首页数据加载无错误处理导致 Promise 静默失败
- 修复系统配置页 useEffect 缺少 toast 依赖
- 修复系统配置页乐观回滚使用 stale closure 导致潜在状态不一致
- 修复管理页面卡片缺少 shadow-sm 与设置页样式不一致
- 修复 api.ts 文件末尾缺少换行符

## [0.2.3] - 2026-02-06

### 修复

- 修复移动端滚动自选列表时误触发卡片点击导航的问题
- 修复 useLongPress hook 在非左键鼠标按钮时的边界情况处理

## [0.2.2] - 2026-02-06

### 新增

- 批量价格端点 `/etf/batch-price`：轻量级实时价格批量查询
- 自选列表自动轮询：交易时段按设定间隔自动刷新价格
- 添加 ETF 后自动补全高级指标（ATR、回撤、趋势、温度）
- 刷新频率选项调整为 15/30/60 秒，默认 30 秒

### 修复

- 修复 batch-price 端点缺少输入格式校验（现要求 6 位数字）
- 修复 batch-price 端点缺少限流（添加 120/分钟限制）
- 修复旧版 refreshRate 值（5/10）未迁移导致激进轮询和下拉框异常
- 修复轮询 useEffect 闭包陈旧问题（改用 useRef）
- 修复轮询挂载后无初始请求的延迟问题
- 修复本地模式下轮询价格未持久化到 localStorage

## [0.2.1] - 2026-02-06

### 新增

- 自选列表下拉刷新：支持触摸手势实时更新数据

### 修复

- 修复设置页版本号闪烁问题，改用构建时环境变量注入
- 修复 CI 使用已弃用的 actions/create-release，替换为 softprops/action-gh-release
- 修复 Docker 构建在分支推送时误触发，限制为仅版本标签触发

## [0.2.0] - 2026-02-06

### 新增

- PWA 支持：添加 Web App Manifest 和 Apple 专用 meta 标签
- iOS 独立模式（standalone）：消除浏览器地址栏和控制条
- PWA 图标：多尺寸图标和 maskable 图标支持
- Safe Area 适配：全屏模式下正确处理 iOS 刘海屏和底部指示条

### 修复

- 修复 iOS Safari 添加到主屏幕后仍显示浏览器控制栏的问题
- 修复固定定位元素被系统 UI 遮挡的问题

## [0.1.0] - 2026-02-05

### 新增

- 版本管理系统（语义化版本，Git 标签驱动）
- ETF 搜索、行情查看、历史数据图表
- 核心指标计算（CAGR、最大回撤、ATR、波动率）
- 用户认证（注册、登录、JWT）
- 自选列表管理（本地优先 + 云端同步）
- 管理员后台（用户管理、系统配置）
- Docker 多架构部署支持
