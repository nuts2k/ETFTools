# Changelog

## [0.2.2] - 2026-02-06

### 新增

- 批量价格端点 `/etf/batch-price`：轻量级实时价格批量查询
- 自选列表自动轮询：交易时段按设定间隔自动刷新价格
- 添加 ETF 后自动补全高级指标（ATR、回撤、趋势、温度）
- 刷新频率选项调整为 15/30/60 秒，默认 30 秒

### 修复

- 修复 batch-price 端点缺少输入格式校验（现要求 6 位数字）
- 修复 batch-price 端点缺少限流（添加 120/分钟限制）
- 修复旧版 refreshRate 值（5/10）未迁移导致激进轮询和下拉框异常
- 修复轮询 useEffect 闭包陈旧问题（改用 useRef）
- 修复轮询挂载后无初始请求的延迟问题
- 修复本地模式下轮询价格未持久化到 localStorage

## [0.2.1] - 2026-02-06

### 新增

- 自选列表下拉刷新：支持触摸手势实时更新数据

### 修复

- 修复设置页版本号闪烁问题，改用构建时环境变量注入
- 修复 CI 使用已弃用的 actions/create-release，替换为 softprops/action-gh-release
- 修复 Docker 构建在分支推送时误触发，限制为仅版本标签触发

## [0.2.0] - 2026-02-06

### 新增

- PWA 支持：添加 Web App Manifest 和 Apple 专用 meta 标签
- iOS 独立模式（standalone）：消除浏览器地址栏和控制条
- PWA 图标：多尺寸图标和 maskable 图标支持
- Safe Area 适配：全屏模式下正确处理 iOS 刘海屏和底部指示条

### 修复

- 修复 iOS Safari 添加到主屏幕后仍显示浏览器控制栏的问题
- 修复固定定位元素被系统 UI 遮挡的问题

## [0.1.0] - 2026-02-05

### 新增

- 版本管理系统（语义化版本，Git 标签驱动）
- ETF 搜索、行情查看、历史数据图表
- 核心指标计算（CAGR、最大回撤、ATR、波动率）
- 用户认证（注册、登录、JWT）
- 自选列表管理（本地优先 + 云端同步）
- 管理员后台（用户管理、系统配置）
- Docker 多架构部署支持
